<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Street View</title>
    <meta http-equiv="X-UA-Compatible" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/css/inicio.css" />
  </head>
  <body>
    <section class="intro">
      <div class="nav">
          <span><img src="/public/img/Logo_Oficial_Unicartagena.png" alt=""></span>
      </div>
      <div class="left">
        <div>
          <h1>¡Bienvenido al tour Virtual 360° de la Universidad de Cartagena en su sede de Cereté, Córdoba!</h1>
          <p> Prepárate para una experiencia inmersiva. Podras conocer lugares de esta sede que impulsan el desarrollo profesional y académico en la región. ¡Explora cada rincón como si estuvieras allí!</p>
          <div class="centrar-btn">
          <a href="/src/html/recorrido.html" target="" class="btn">Iniciar recorrido</a>
          </div>
        </div>
      </div>
      <div class="slider">
        <ul>
          <li style="background-image:url(/public/img/img1.jpg)">
            <div class="center-y">
              <h3 class="highlight">EXPLORA</h3>
            </div>
          </li>
          <li style="background-image:url(/public/img/img2.jpg)">
            <div class="center-y">
              <h3 class="highlight">DESCUBRE</h3>
            </div>
          </li>
          <li style="background-image:url(/public/img/img3.jpg)">
            <div class="center-y">
              <h3 class="highlight">DIVIERTETE</h3>	
            </div>
          </li>
        </ul>
        <ul>
          <nav>
            <a href="#"></a>
            <a href="#"></a>
            <a href="#"></a>
          </nav>
        </ul>
      </div>
	</section>
  <script>
	class SliderClip {
		constructor(el) {
			this.el = el;
			this.Slides = Array.from(this.el.querySelectorAll('li'));
			this.Nav = Array.from(this.el.querySelectorAll('nav a'));
			this.totalSlides = this.Slides.length;
			this.current = 0;
			this.autoPlay = true; 
			this.timeTrans = 4000; 
			this.IndexElements = [];

			for(let i=0;i<this.totalSlides;i++) {
				this.IndexElements.push(i);
			}

			this.setCurret();
			this.initEvents();
		}
		setCurret() {
			this.Slides[this.current].classList.add('current');
			this.Nav[this.current].classList.add('current_dot');
		}
		initEvents() {
			const self = this;

			this.Nav.forEach((dot) => {
				dot.addEventListener('click', (ele) => {
					ele.preventDefault();
					this.changeSlide(this.Nav.indexOf(dot));
				})
			})

			this.el.addEventListener('mouseenter', () => self.autoPlay = false);
			this.el.addEventListener('mouseleave', () => self.autoPlay = true);

			setInterval(function() {
				if (self.autoPlay) {
					self.current = self.current < self.Slides.length-1 ? self.current + 1 : 0;
					self.changeSlide(self.current);
				}
			}, this.timeTrans);

		}
		changeSlide(index) {

			this.Nav.forEach((allDot) => allDot.classList.remove('current_dot'));

			this.Slides.forEach((allSlides) => allSlides.classList.remove('prev', 'current'));

			const getAllPrev = value => value < index;

			const prevElements = this.IndexElements.filter(getAllPrev);

			prevElements.forEach((indexPrevEle) => this.Slides[indexPrevEle].classList.add('prev'));

			this.Slides[index].classList.add('current');
			this.Nav[index].classList.add('current_dot');
		}
	}
	const slider = new SliderClip(document.querySelector('.slider'));
  </script>
  </body>
</html>


